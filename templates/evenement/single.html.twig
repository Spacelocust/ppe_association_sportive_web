{% extends 'base.html.twig' %}
{% set nom = event.nom|trim('.') %}
{% block title %}{{ nom }} - Événement -{% endblock %}
{% block body %}
    <div class="head head-single head-single-event">
        <h1 class="title title-single title-single-event">{{ nom }}</h1>
        <div class="subtitle subtitle-single subtitle-single-event">
            <div class="info-primary info-primary-single info-primary-single-event">
                <span class="date date-single date-single-event">
                <i class="far fa-calendar-plus"></i>
                {% set debut = event.debut|date("m F Y") %}
                    {% set fin = event.fin|date("m F Y") %}
                    {{ debut }}
                    {% if debut != fin %}
                        au {{ fin }}
                    {% endif %}
            </span>
                <span class="registration">
                <i class="fas fa-info-circle"></i>
                {% set haveOne = [] %}
                    {% set nbrPlace = event.nombrePlaces %}
                    {% for insc in inscriptionCount %}
                        {% if insc.id == event.id %}
                            {% if insc.1 == event.nombrePlaces %}
                                {% trans %}Inscriptions terminées{% endtrans %}
                            {% else %}
                                {% set string = insc.1 > 1 ? 'inscriptions' : 'inscription' %}
                                {% set nbrInscrit = insc.1 %}
                                {% trans %}
                                    %nbrInscrit% %string% sur %nbrPlace%
                                {% endtrans %}
                            {% endif %}
                            {% set haveOne = haveOne|merge([event.id]) %}
                        {% endif %}
                    {% endfor %}
                    {% if haveOne is not null and event.id not in haveOne %}
                        {% trans %}%nbrPlace% places disponibles !{% endtrans %}
                    {% endif %}
            </span>
            </div>
            <div class="info info-single info-single-event">
                <span><i>Sport</i> : {{ event.sport.nom }}</span>
                <span><i>Type d'événement</i> : {{ event.type.nom }}</span>
                <span><i>Catégorie</i> : {{ event.categorie.nom }}</span>
            </div>
        </div>
    </div>
    <div class="body body-single body-single-event">
        <img alt="{% trans %}La vignette de l'événement %nom%{% endtrans %}"
             class="image image-single image-single-event"
             src="{{ asset('media/images/featured/vignettes/' ~ event.vignette)  }}"
        >
        <div class="description description-single description-single-event">
            <h2>Description</h2>
            <p>{{ event.description }}</p>
        </div>
        <div class="inscription inscription-single inscription-single-event">
            <h2>Inscription</h2>
            {# Création du champs description inscription sprint 3 #}
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Blanditiis dolorem dolores illum rerum
                voluptatem! A dolorem, eius facilis iure laudantium mollitia, quasi quidem quo repellat repellendus
                sequi veritatis. Adipisci consectetur debitis doloremque dolorum facere illo illum impedit ipsum
                mollitia nam placeat, possimus quae quia quod saepe suscipit, voluptate. Ab animi commodi corporis
                debitis eius eveniet inventore ipsam libero maiores nisi, optio porro, quo, quod similique veniam
                veritatis voluptatibus? Animi aut delectus ipsum! Accusamus alias aliquam amet animi aspernatur eos
                error fugiat harum illo iure magni maxime nam nemo nesciunt, nisi odio officia pariatur quis ratione
                vel. Culpa cum dolorem dolores dolorum, eos eveniet excepturi expedita hic ipsum, nisi non pariatur
                porro quae quam repellat sit tempora temporibus veniam voluptatem voluptatibus! Animi architecto dolorum
                et expedita, illum impedit ipsa, iste laborum nulla optio quasi repellat ut? Ad alias aliquam aliquid
                animi aperiam assumenda corporis cupiditate delectus dolor dolore doloremque dolores ea eaque et eum ex
                exercitationem harum hic in inventore ipsa, itaque minima minus mollitia natus nisi nobis obcaecati
                omnis perferendis, qui, quibusdam quo reiciendis reprehenderit sunt totam velit voluptates. Accusamus
                amet animi asperiores atque autem doloribus et, explicabo facere illum labore magnam nihil nobis
                obcaecati odio perspiciatis sed vero voluptatum?</p>
        </div>
        <div class="document document-single document-single-event">
            {% set number = '' %}
            {% for count in documentCount %}
                {% if count.id == event.id %}
                    {% set number = count.1 %}
                {% endif %}
            {% endfor %}
            {% set string = number > 1 ? 'documents' : 'document' %}
            {% if number != '' %}
                <h2>{% trans %}%number% %string% à télécharger{% endtrans %}</h2>
                <div class="document-table document-table-single document-table-single-event">
                    <div class="document-row document-row-single document-row-single-event document-row-first odd">
                        <span nom class="name">Nom du document</span>
                        <span date class="date">Date d'ajout</span>
                        <span cat class="category">Catégorie</span>
                        <span poids class="weight">Poids</span>
                        <span action class="action">Action</span>
                    </div>
                    {% for key, document in documents %}
                        {% if document.evenement.id == event.id %}
                            {% set classes = key is odd ? 'odd' : 'even' %}
                            <div class="document-row document-row-single document-row-single-event {{ classes }}">
                                <span nom class="name">{{ document.nom }}</span>
                                <span date class="date">{{ document.createdAt|date("m F Y") }}</span>
                                <span cat class="category">{{ document.categorie.nom }}</span>
                                <span poids class="weight">A venir dans le sprint 4{#{{ document.poids }}#}</span>
                                <button action class="button button-single button-single-event button-telecharger">Télécharger</button>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            {% else %}
                 <h2>{% trans %}Aucun document à télécharger{% endtrans %}</h2>
            {% endif %}
        </div>
    </div>
    <div class="footer footer-single footer-single-event">
        <a class="back back-single back-single-event" href="{{ path('evenement') }}">{% trans %}< Retour aux événements{% endtrans %}</a>
        <button class="button button-single button-single-event button-inscription">Inscription</button>
    </div>
{% endblock body %}